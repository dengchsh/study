- 横向拓展的能力
- 数据库优化
- 让一台机器能投承受更多的用户请求
### 系能测试
- 性能案例分析
- 火车  2008奥运  双11
## 性能关键指标
	模拟大量用户同事访问 被测应用
	
	观察  记录  和分析系统的各项指标
	评估系统性能的瓶颈
	模拟大量并发用户

1. 平均响应时间  TTLB  
	2 非常有吸引力   
	5 比较不错      
	10 糟糕    
	1秒  少了11% 的pv   降低 16%满意度
2. cpu
3. 内存
4. I/0（重要）
5. 带宽（钱、技术）
### 分类
1. 负载测试 Load Test
2. 压力测试 Stress Test（极端负载情况的性能表现）
开发人员性能测试
###工具
1. top  （进程级别）
排序 F  O
h 帮助
- "Shift + <" 和 "Shift + >"
- 查看某一进程的所有线程

top -H -p <pid>
top -H -p 4361

pid   进程id
USER  用户
Virt  虚拟内存大小
Res   物理内存大小
SHR   共享内存大小
TIME+ 运行时间
COMMAND   运行的命令
F可以看具体意思
top -ab -n 1   查看所有进程
获取每个资源的占用情况

> 
> yum  list sysstat
> 
> cd /var/log/sa
> 
> sar -q -f sa14

runq-sz  等待
plist-sz  队列中的任务总数

ldavg-1  1分钟负载 (借鉴cpu 个数)
注意关注1 分钟  5 分  15分钟
top


	
	12:00:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15
	12:10:01 AM         0       195      0.01      0.21      0.29
	12:20:01 AM         0       199      0.01      0.07      0.18
	09:40:01 PM         0       199      0.00      0.02      0.12
	09:50:01 PM         0       197      0.00      0.01      0.07
	10:00:01 PM         0       199      0.03      0.04      0.05
	10:10:01 PM         0       196      0.00      0.01      0.05
	10:20:01 PM         0       199      0.00      0.01      0.05
	10:30:01 PM         0       196      0.01      0.03      0.05
	10:40:01 PM         0       200      0.00      0.01      0.05
	10:50:01 PM         0       196      0.02      0.02      0.05
	11:00:01 PM         0       199      0.06      0.03      0.05
	11:10:01 PM         0       197      0.03      0.02      0.05
	11:20:01 PM         0       197      0.03      0.04      0.05
	11:30:01 PM         0       194      0.11      0.04      0.05
	11:40:01 PM         1       193      0.00      0.01      0.05
	11:50:01 PM         0       191      0.00      0.01      0.05
	Average:            0       197      0.02      0.04      0.08

- 百分比
sar -p -f sa14

- NI 进程Nice值  进程可被执行的优先级  修正值
- pr  值越小  优先级越高 越早被执行
- pri    pr+ ni
- steal  等待cup  越高 cup压力越大
- iowait  越高磁盘压力越大
- idle
- 
	
	12:00:01 AM     CPU     %user     %nice   %system   %iowait    %steal     %idle
	12:10:01 AM     all     24.24      0.00      1.72      0.03      0.00     74.01
	12:20:01 AM     all      0.02      0.00      0.20      0.00      0.00     99.77
	09:40:01 PM     all      0.01      0.00      0.14      0.00      0.00     99.86
	09:50:01 PM     all      0.02      0.00      0.14      0.00      0.00     99.84
	10:00:01 PM     all      0.01      0.00      0.14      0.00      0.00     99.86
	10:10:01 PM     all      0.01      0.00      0.15      0.00      0.00     99.84
	10:20:01 PM     all      0.01      0.00      0.14      0.00      0.00     99.85
	10:30:01 PM     all      0.01      0.00      0.14      0.00      0.00     99.85
	10:40:01 PM     all      0.01      0.00      0.14      0.00      0.00     99.85
	10:50:01 PM     all      0.00      0.00      0.13      0.00      0.00     99.87
	11:00:01 PM     all      0.01      0.00      0.13      0.00      0.00     99.86
	11:10:01 PM     all      0.02      0.00      0.15      0.00      0.00     99.83
	11:20:01 PM     all      0.01      0.00      0.13      0.00      0.00     99.85
	11:30:01 PM     all      0.00      0.00      0.13      0.00      0.00     99.86
	11:40:01 PM     all      0.02      0.00      0.13      0.00      0.00     99.86
	11:50:01 PM     all      0.00      0.00      0.13      0.00      0.00     99.86
	Average:        all      1.56      0.00      0.24      0.00      0.00     98.20
- 内存
sar -r -f sa14
-  kbmemfree 空闲的内存
-  kbmemused 使用的内存
-  memused  使用率
-  kbcached  文件缓存
-  kbbuffers  底层磁盘快的缓存
-  kbcommit  还需要的内存  评估
-  commit 还需要的内存百分比   评估
注意 commit + kbmemused 的值是否超过 100

	12:00:01 AM kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit
	12:10:01 AM    219800    792280     78.28     92552    498392    601992     19.78
	12:20:01 AM    216876    795204     78.57     92604    498412    609224     20.02
	09:40:01 PM    216744    795336     78.58     92636    498404    609224     20.02
	09:50:01 PM    217892    794188     78.47     92676    498420    606560     19.93
	10:00:01 PM    216744    795336     78.58     92700    498412    609224     20.02
	10:10:01 PM    217808    794272     78.48     92740    498428    606560     19.93
	10:20:01 PM    216496    795584     78.61     92772    498420    609224     20.02
	10:30:01 PM    217808    794272     78.48     92808    498436    606560     19.93
	10:40:01 PM    216464    795616     78.61     92840    498428    609224     20.02
	10:50:01 PM    217808    794272     78.48     92864    498440    606560     19.93
	11:00:01 PM    216496    795584     78.61     92896    498436    609224     20.02
	11:10:01 PM    217520    794560     78.51     92944    498452    606560     19.93
	11:20:01 PM    218288    793792     78.43     92980    498456    604656     19.87
	11:30:01 PM    219336    792744     78.33     93004    498460    601992     19.78
	11:40:01 PM    221972    790108     78.07     93060    498460    595388     19.56
	11:50:01 PM    222896    789184     77.98     93092    498472    592724     19.47
	Average:       218184    793896     78.44     92823    498433    605306     19.89

- 内存换页
sar -B -f sa14
- pgpgin/s 
- pgpgout/s 
	出现换入  换出 有磁盘的读写  io 的系能会受影响
- fault/s  缺页数    内存不够用放大磁盘去
- majflt/s  主缺页
- 



	12:00:01 AM  pgpgin/s pgpgout/s   fault/s  majflt/s  pgfree/s pgscank/s pgscand/s pgsteal/s    %vmeff
	12:10:01 AM      0.28    668.21   4388.15      0.00   3124.46      0.00      0.00      0.00      0.00
	12:20:01 AM      0.00      0.52     59.42      0.00     16.86      0.00      0.00      0.00      0.00
	09:40:01 PM      0.00      0.26     10.31      0.00      3.33      0.00      0.00      0.00      0.00
	09:50:01 PM      0.00      0.25     34.67      0.00     11.56      0.00      0.00      0.00      0.00
	10:00:01 PM      0.00      0.13      6.05      0.00      1.48      0.00      0.00      0.00      0.00
	10:10:01 PM      0.00      0.28     14.08      0.00      4.55      0.00      0.00      0.00      0.00
	10:20:01 PM      0.00      0.18     15.92      0.00      4.59      0.00      0.00      0.00      0.00
	10:30:01 PM      0.00      0.23      3.92      0.00      1.85      0.00      0.00      0.00      0.00
	10:40:01 PM      0.00      0.18     15.92      0.00      4.67      0.00      0.00      0.00      0.00
	10:50:01 PM      0.00      0.17      3.92      0.00      1.85      0.00      0.00      0.00      0.00
	11:00:01 PM      0.00      0.21      6.05      0.00      1.50      0.00      0.00      0.00      0.00
	11:10:01 PM      0.00      0.33     23.93      0.00      7.65      0.00      0.00      0.00      0.00
	11:20:01 PM      0.01      0.27      6.19      0.00      2.25      0.00      0.00      0.00      0.00
	11:30:01 PM      0.00      0.17      3.92      0.00      1.80      0.00      0.00      0.00      0.00
	11:40:01 PM      0.00      0.51     16.23      0.00      6.28      0.00      0.00      0.00      0.00
	11:50:01 PM      0.00      0.20      3.93      0.00      1.79      0.00      0.00      0.00      0.00
	Average:         0.02     42.90    294.27      0.00    204.00      0.00      0.00      0.00      0.00

- WAP 的换入换出  交换的频繁程度
sar -W -f sa14

	12:00:01 AM  pswpin/s pswpout/s
	12:10:01 AM      0.00      0.00
	12:20:01 AM      0.00      0.00
	09:40:01 PM      0.00      0.00
	09:50:01 PM      0.00      0.00
	10:00:01 PM      0.00      0.00
	10:10:01 PM      0.00      0.00
	10:20:01 PM      0.00      0.00
	10:30:01 PM      0.00      0.00
	10:40:01 PM      0.00      0.00
	10:50:01 PM      0.00      0.00
	11:00:01 PM      0.00      0.00
	11:10:01 PM      0.00      0.00
	11:20:01 PM      0.00      0.00
	11:30:01 PM      0.00      0.00
	11:40:01 PM      0.00      0.00
	11:50:01 PM      0.00      0.00
	Average:         0.00      0.00

io的观察
sar -b -f sa14
tps  物理设备的I/o 的请求次数
rtps 读入的请求次数
wtps 写入的请求次数
bread/s 从物理设备读入的数据量 单位块
bwrtn/s  从物理设备读入的数据量  单位块

	12:00:01 AM       tps      rtps      wtps   bread/s   bwrtn/s
	12:10:01 AM    169.61      0.07    169.54      1.10   2672.85
	12:20:01 AM      0.21      0.00      0.21      0.00      2.06
	09:40:01 PM      0.11      0.00      0.11      0.00      1.03
	09:50:01 PM      0.11      0.00      0.11      0.00      1.02
	10:00:01 PM      0.06      0.00      0.06      0.00      0.51
	10:10:01 PM      0.12      0.00      0.12      0.00      1.13
	10:20:01 PM      0.08      0.00      0.08      0.00      0.72
	10:30:01 PM      0.10      0.00      0.10      0.00      0.91
	10:40:01 PM      0.08      0.00      0.08      0.00      0.72
	10:50:01 PM      0.07      0.00      0.07      0.00      0.70
	11:00:01 PM      0.09      0.00      0.09      0.00      0.83
	11:10:01 PM      0.14      0.00      0.14      0.00      1.34
	11:20:01 PM      0.12      0.00      0.11      0.03      1.07
	11:30:01 PM      0.07      0.00      0.07      0.00      0.70
	11:40:01 PM      0.21      0.00      0.21      0.00      2.03
	11:50:01 PM      0.08      0.00      0.08      0.00      0.80
	Average:        10.93      0.00     10.93      0.07    171.61
-  读写扇区 监控
sar -d -f sa14

- rd_sec/s 读入扇区的次数
- wr_sec/s 写入扇区的次数
- avgrq-sz 写入的平均大小
- avgqu-sz  队列长度
-  await   处理完成消耗时间
-  svctm   等待消耗的时间
-  util   I
-  /0占cpu百分   
	
	12:00:01 AM       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util
	12:10:01 AM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	12:10:01 AM    dev8-0      2.52      0.55   1336.43    529.89      0.19     76.22      3.46      0.87
	12:10:01 AM  dev253-0    167.09      0.55   1336.43      8.00     19.22    115.02      0.05      0.87
	12:10:01 AM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	12:20:01 AM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	12:20:01 AM    dev8-0      0.08      0.00      1.03     12.32      0.00      1.82      0.68      0.01
	12:20:01 AM  dev253-0      0.13      0.00      1.03      8.00      0.00      1.81      0.44      0.01
	12:20:01 AM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	09:40:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	09:40:01 PM    dev8-0      0.05      0.00      0.51     10.82      0.00      2.12      1.35      0.01
	09:40:01 PM  dev253-0      0.06      0.00      0.51      8.00      0.00      2.13      1.00      0.01
	09:40:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	09:50:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	09:50:01 PM    dev8-0      0.04      0.00      0.51     11.69      0.00      2.69      1.27      0.01
	09:50:01 PM  dev253-0      0.06      0.00      0.51      8.00      0.00      2.55      0.87      0.01
	09:50:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:00:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:00:01 PM    dev8-0      0.02      0.00      0.25     10.86      0.00      2.36      1.57      0.00
	10:00:01 PM  dev253-0      0.03      0.00      0.25      8.00      0.00      2.32      1.16      0.00
	10:00:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:10:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:10:01 PM    dev8-0      0.05      0.00      0.56     11.20      0.00      3.27      1.43      0.01
	10:10:01 PM  dev253-0      0.07      0.00      0.56      8.00      0.00      3.60      1.02      0.01
	10:10:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:20:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:20:01 PM    dev8-0      0.03      0.00      0.36     10.80      0.00      2.30      1.40      0.00
	10:20:01 PM  dev253-0      0.05      0.00      0.36      8.00      0.00      2.19      1.04      0.00
	10:20:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	
	10:20:01 PM       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util
	10:30:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:30:01 PM    dev8-0      0.04      0.00      0.46     11.83      0.00      2.04      0.78      0.00
	10:30:01 PM  dev253-0      0.06      0.00      0.46      8.00      0.00      2.03      0.53      0.00
	10:30:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:40:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:40:01 PM    dev8-0      0.03      0.00      0.36     10.80      0.00      2.70      1.55      0.01
	10:40:01 PM  dev253-0      0.05      0.00      0.36      8.00      0.00      2.81      1.15      0.01
	10:40:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:50:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	10:50:01 PM    dev8-0      0.03      0.00      0.35     11.56      0.00      1.22      0.56      0.00
	10:50:01 PM  dev253-0      0.04      0.00      0.35      8.00      0.00      1.27      0.38      0.00
	10:50:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:00:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:00:01 PM    dev8-0      0.04      0.00      0.41     10.78      0.00      1.96      1.13      0.00
	11:00:01 PM  dev253-0      0.05      0.00      0.41      8.00      0.00      1.84      0.84      0.00
	11:00:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:10:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:10:01 PM    dev8-0      0.06      0.00      0.67     11.43      0.00      3.49      1.57      0.01
	11:10:01 PM  dev253-0      0.08      0.00      0.67      8.00      0.00      3.94      1.10      0.01
	11:10:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:20:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:20:01 PM    dev8-0      0.05      0.01      0.54     11.31      0.00      3.10      1.66      0.01
	11:20:01 PM  dev253-0      0.07      0.01      0.54      8.00      0.00      3.78      1.17      0.01
	11:20:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:30:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:30:01 PM    dev8-0      0.03      0.00      0.35     12.24      0.00      2.00      0.82      0.00
	11:30:01 PM  dev253-0      0.04      0.00      0.35      8.00      0.00      1.92      0.54      0.00
	11:30:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	
	11:30:01 PM       DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util
	11:40:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:40:01 PM    dev8-0      0.09      0.00      1.02     11.92      0.00      2.20      0.69      0.01
	11:40:01 PM  dev253-0      0.13      0.00      1.02      8.00      0.00      2.22      0.46      0.01
	11:40:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:50:01 PM   dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	11:50:01 PM    dev8-0      0.03      0.00      0.40     12.00      0.00      2.20      1.05      0.00
	11:50:01 PM  dev253-0      0.05      0.00      0.40      8.00      0.00      1.87      0.70      0.00
	11:50:01 PM  dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	Average:      dev11-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
	Average:       dev8-0      0.20      0.04     85.80    422.34      0.01     60.90      2.98      0.06
	Average:     dev253-0     10.73      0.04     85.80      8.00      1.23    114.38      0.06      0.06
	Average:     dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00




- NetWork

sar -n DEV -f sa14

- IFACE   网卡
-  rxpck/s  接收的数据包 
-   txpck/s 发送的数据包
-      rxkB/s 接收字节数
-         txkB/s  发送字节数
-          rxcmp/s 每秒钟接收的压缩包
-            txcmp/s 每秒钟发送的压缩包 
-            rxmcst/s

12:00:01 AM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s
12:10:01 AM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
12:10:01 AM      eth0      1.07      1.17      0.09      0.19      0.00      0.00      0.00
12:20:01 AM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
12:20:01 AM      eth0      0.31      0.20      0.03      0.02      0.00      0.00      0.00
09:40:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
09:40:01 PM      eth0      0.29      0.17      0.02      0.01      0.00      0.00      0.00
09:50:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
09:50:01 PM      eth0      0.20      0.16      0.02      0.01      0.00      0.00      0.00
10:00:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
10:00:01 PM      eth0      0.20      0.13      0.01      0.01      0.00      0.00      0.00
10:10:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
10:10:01 PM      eth0      0.21      0.15      0.01      0.01      0.00      0.00      0.00
10:20:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
10:20:01 PM      eth0      0.17      0.13      0.01      0.01      0.00      0.00      0.00
10:30:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
10:30:01 PM      eth0      0.19      0.15      0.01      0.01      0.00      0.00      0.00
10:40:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
10:40:01 PM      eth0      0.19      0.13      0.01      0.01      0.00      0.00      0.00
10:50:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
10:50:01 PM      eth0      0.18      0.15      0.01      0.01      0.00      0.00      0.00
11:00:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
11:00:01 PM      eth0      0.16      0.13      0.01      0.01      0.00      0.00      0.00
11:10:01 PM        lo      0.01      0.01      0.00      0.00      0.00      0.00      0.00
11:10:01 PM      eth0      0.20      0.19      0.01      0.01      0.00      0.00      0.00

11:10:01 PM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s
11:20:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
11:20:01 PM      eth0      0.17      0.13      0.01      0.01      0.00      0.00      0.00
11:30:01 PM        lo      0.02      0.02      0.00      0.00      0.00      0.00      0.00
11:30:01 PM      eth0      0.21      0.21      0.01      0.01      0.00      0.00      0.00
11:40:01 PM        lo      0.01      0.01      0.00      0.00      0.00      0.00      0.00
11:40:01 PM      eth0      0.21      0.17      0.02      0.01      0.00      0.00      0.00
11:50:01 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
11:50:01 PM      eth0      0.17      0.15      0.01      0.01      0.00      0.00      0.00
Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
Average:         eth0      0.26      0.22      0.02      0.02      0.00      0.00      0.00

- 每秒钟接收的坏数据
- 
sar -n NFS -f sa14

12:00:01 AM    call/s retrans/s    read/s   write/s  access/s  getatt/s
12:10:01 AM      0.00      0.00      0.00      0.00      0.00      0.00
12:20:01 AM      0.00      0.00      0.00      0.00      0.00      0.00
09:40:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
09:50:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
10:00:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
10:10:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
10:20:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
10:30:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
10:40:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
10:50:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
11:00:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
11:10:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
11:20:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
11:30:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
11:40:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
11:50:01 PM      0.00      0.00      0.00      0.00      0.00      0.00
Average:         0.00      0.00      0.00      0.00      0.00      0.00

##fio
- 评估磁盘性能极限

磁盘io的性能


按照网上给的资料


FIO安装 
wget http://brick.kernel.dk/snaps/fio-2.0.7.tar.gz 
yum install libaio-devel 
tar -zxvf fio-2.0.7.tar.gz 
cd fio-2.0.7 
make 
make install
	参考
	filename=/dev/emcpowerb　支持文件系统或者裸设备，-filename=/dev/sda2或-filename=/dev/sdb
	direct=1                 测试过程绕过机器自带的buffer，使测试结果更真实
	rw=randwread             测试随机读的I/O
	rw=randwrite             测试随机写的I/O
	rw=randrw                测试随机混合写和读的I/O
	rw=read                  测试顺序读的I/O
	rw=write                 测试顺序写的I/O
	rw=rw                    测试顺序混合写和读的I/O
	bs=4k                    单次io的块文件大小为4k
	bsrange=512-2048         同上，提定数据块的大小范围
	size=5g                  本次的测试文件大小为5g，以每次4k的io进行测试
	numjobs=30               本次的测试线程为30
	runtime=1000             测试时间为1000秒，如果不写则一直将5g文件分4k每次写完为止
	ioengine=psync           io引擎使用pync方式，如果要使用libaio引擎，需要yum install libaio-devel包
	rwmixwrite=30            在混合读写的模式下，写占30%
	group_reporting          关于显示结果的，汇总每个进程的信息
	此外
	lockmem=1g               只使用1g内存进行测试
	zero_buffers             用0初始化系统buffer
	nrfiles=8                每个进程生成文件的数量
	https://www.cnblogs.com/raykuan/p/6914748.html

fio  --name=first_job --ioengine=libaio --iodepth=4 \
     --size=10m       --bs=4k          --rw=write   \
     --direct=1       --filename=/devdata/1.txt


io=执行了多少M的IO

bw=平均IO带宽
iops=IOPS   高  数据库服务器
runt=线程运行时间
slat=提交延迟
clat=完成延迟
lat=响应时间
bw=带宽
cpu=利用率
IO depths=io队列
IO submit=单个IO提交要提交的IO数
IO complete=Like the above submit number, but for completions instead.
IO issued=The number of read/write requests issued, and how many of them were short.
IO latencies=IO完延迟的分布

io=总共执行了多少size的IO
aggrb=group总带宽
minb=最小.平均带宽.
maxb=最大平均带宽.
mint=group中线程的最短运行时间.
maxt=group中线程的最长运行时间.

ios=所有group总共执行的IO数.
merge=总共发生的IO合并数.
ticks=Number of ticks we kept the disk busy.
io_queue=花费在队列上的总共时间.
util=磁盘利用率


https://www.cnblogs.com/raykuan/p/6914748.html



